### JavaScript 防抖和节流：深度解析

#### 什么是防抖和节流？

防抖（Debounce） 和 节流（Throttle） 都是函数调用的优化技术，主要用于处理高频事件，例如：

- 输入框输入时触发搜索
- 窗口滚动加载更多内容
- 鼠标移动触发动画

**防抖**：在规定时间内，函数只会执行一次，并且是在事件触发后的一段时间内。如果在这段时间内事件再次触发，则会重新计算时间。

**节流**：在规定时间内，函数只能执行一次。如果这个时间段内事件触发多次，只有第一次会执行函数，其他的都会被忽略。

#### 为什么需要防抖和节流？

- 提高性能：减少不必要的函数调用，降低浏览器负载。
- 优化用户体验：防止频繁触发导致界面卡顿或响应延迟。

#### 防抖和节流的区别

| 特点     | 防抖                                  | 节流                                           |
| -------- | ------------------------------------- | ---------------------------------------------- |
| 执行时机 | 事件结束后的一段时间内执行一次        | 在规定时间内，无论事件触发多少次，都只执行一次 |
| 使用场景 | 输入框搜索、窗口 resize、按钮连续点击 | 滚动加载、动画、游戏中的帧率控制               |

#### 实现方式

##### 防抖

```js
function debounce(func, wait) {
  let timeout;
  return function () {
    clearTimeout(timeout);
    timeout = setTimeout(() => {
      func.apply(this, arguments);
    }, wait);
  };
}
```

##### 节流

```js
function throttle(func, wait) {
  let previous = 0;
  return function () {
    let now = Date.now();
    if (now - previous > wait) {
      previous = now;
      func.apply(this, arguments);
    }
  };
}
```

##### 使用场景

- 防抖：
  - 输入框实时搜索：防止用户快速输入时频繁请求服务器。
  - 窗口 resize 调整布局：避免频繁计算和重绘。
  - 按钮点击提交表单：防止用户多次点击。
- 节流：
  - 滚动加载：避免频繁发送请求。
  - 鼠标移动触发动画：控制动画帧率。
  - 游戏中的帧率控制：防止游戏画面卡顿。

##### 何时使用防抖？

- 当你希望在用户停止操作后执行一次函数时。

##### 何时使用节流？

- 当你希望在一定时间内限制函数的执行次数时。
