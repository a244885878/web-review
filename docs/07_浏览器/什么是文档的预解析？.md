> 文档预解析（Pre-parsing）是指在浏览器的主线程解析 HTML 文档的过程中，一个预解析线程会并行运行，提前扫描并下载 HTML 中链接的外部资源（如 CSS 文件、JavaScript 文件、图片等）。

#### 为什么要预解析？

- 提升页面加载速度： 通过提前下载资源，减少了浏览器在后续渲染过程中对这些资源的等待时间，从而加快页面加载速度，提升用户体验。
- 优化资源获取： 预解析可以帮助浏览器更好地组织和管理资源请求，提高资源获取的效率。

#### 预解析的工作原理

1. 并行处理： 预解析线程与主线程同时工作，互不干扰。
2. 提前下载： 预解析线程会扫描 HTML 中的资源链接，并开始下载这些资源。
3. 资源缓存： 下载下来的资源会被缓存起来，以便在后续渲染过程中直接使用。

#### 预解析的优势

- 提高页面首屏渲染速度： 对于上面可见的内容，预解析可以显著加快其加载速度。
- 改善用户体验： 更快的加载速度意味着用户可以更快地看到页面内容，减少等待时间。
- 提高页面性能： 通过优化资源加载，可以降低页面加载的压力，提高页面性能。

#### 需要注意的点

- 预解析的局限性： 预解析只能提前下载静态资源，对于动态生成的资源则无能为力。
- 浏览器兼容性： 不同浏览器对预解析的支持程度有所不同。

#### 如何优化预解析

- 合理组织资源： 将关键的 CSS 和 JavaScript 文件放在 HTML 头部，以便尽早加载。
- 使用`<link rel="preload">`： 告诉浏览器哪些资源是优先加载的。
- 压缩资源： 减小文件大小，加快下载速度。
- 利用浏览器缓存： 充分利用浏览器缓存，减少重复下载。

#### 总结

文档预解析是浏览器优化页面加载速度的一项重要技术。通过了解预解析的工作原理和优化方法，我们可以更好地提升网页性能，为用户提供更好的浏览体验。
