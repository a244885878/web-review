### Vue 路由模式对比与原理详解

Vue Router 提供了两种主要的路由模式：**hash** 模式 和 **history** 模式。它们在 URL 结构、浏览器行为和实现原理上存在差异。

#### 1. hash 模式

- URL 结构: URL 中包含一个 `#` 符号，后面跟着一个字符串，如 `http://example.com/#/about`。`#` 及其后面的部分称作 `hash`。

* 浏览器行为: 改变 `hash` 部分不会导致页面刷新，而是会触发 `hashchange` 事件。
* 实现原理:
  - Vue Router 监听 `hashchange` 事件。
  - 当 `hash` 发生变化时，Vue Router 会根据新的 `hash` 值匹配对应的路由规则，更新视图。
  - 浏览器虽然不会向服务器发送请求，但 `hash` 的变化会记录在浏览器历史中，用户可以前进后退。
* 优点:
  - 兼容性好，几乎所有浏览器都支持。
  - 对服务器没有特殊要求。
* 缺点
  - URL 不美观，有 # 符号。
  - 对于 SEO 不友好。

#### 2. history 模式

- URL 结构: `URL` 看起来像正常的 `URL`，如 `http://example.com/about`。
- 浏览器行为: 改变 URL 不会立即向服务器发送请求，而是由前端路由来拦截。
- 实现原理:
  - 利用 HTML5 `History` Interface 提供的 `pushState` 和 `replaceState` 方法来操作浏览器历史记录。
  - 当 `URL` 改变时，Vue Router 会捕获这个变化，并更新视图。
  - 如果用户直接在地址栏输入 `URL` 并回车，浏览器会向服务器发送请求。
- 优点:
  - `URL` 美观，更符合用户习惯。
  - 对 `SEO` 友好。
- 缺点:
  - 要求服务器配置。如果后端没有配置对应的路由，当用户直接访问某个 `URL` 时，会返回 `404` 错误。
  - 兼容性相对 `hash` 模式稍差，不支持 `HTML5 History Interface` 的浏览器无法使用。

#### 两种模式的对比

| 特点       | hash 模式    | history 模式     |
| ---------- | ------------ | ---------------- |
| URL 结构   | 包含 #       | 不包含 #         |
| 浏览器行为 | 不会刷新页面 | 不会立即刷新页面 |
| 服务器要求 | 无           | 需要配置         |
| SEO        | 不友好       | 友好             |
| 兼容性     | 好           | 相对较差         |

#### 总结

- 选择哪种模式？
  - 如果对 `SEO` 要求不高，或者后端不支持配置，可以选择 `hash` 模式。
  - 如果对 `URL` 美观度和 `SEO` 有较高要求，并且后端已经配置好，可以选择 `history` 模式。
- 如何配置？
  - 在 `Vue Router` 的配置文件中，通过 `mode` 属性来设置路由模式：

```js
const router = new VueRouter({
  mode: "history", // 或 'hash'
  // ...
});
```

- 后端配置
  - 使用 `history` 模式时，需要在服务器端对所有可能出现的 `URL` 进行配置，返回同一个 `index.html` 页面。这样，前端路由就可以接管所有的 `URL`，并根据 `URL` 显示不同的内容。

#### 拓展

- `SPA`**（单页应用）**：Vue Router 是专门为 `SPA` 设计的路由管理器，它使得在单页面应用中实现导航变得非常简单。
- **动态路由**：Vue Router 支持动态路由，可以根据 URL 中的参数来匹配不同的组件。
- **嵌套路由**：Vue Router 支持嵌套路由，可以创建多层级的路由结构。
