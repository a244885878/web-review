TCP 重传机制是 TCP 协议实现可靠传输的关键部分，用于在网络发生丢包时重新发送丢失的数据包。

#### 核心机制

> TCP 使用确认应答（ACK）和序列号来保证数据的有序、可靠传输。发送方发送数据包后，接收方会回复一个确认应答，其中包含期望下一个接收的包的序列号。

如果发送方在一定时间内没有收到某个数据包的 ACK，就认为该包丢失，会重新发送该包。

重传触发条件

1. 超时重传：
   1. 发送方发送数据包后，启动一个定时器。
   2. 如果定时器超时后仍未收到相应的 ACK，则认为数据包丢失，触发重传。
   3. 超时时间（RTO）的计算和调整是 TCP 重传机制的重要组成部分，需要根据网络状况动态调整。
2. 快速重传：
   1. 接收方如果收到乱序的数据包，会立即发送重复的 ACK，告知发送方期望收到的下一个包的序列号。
   2. 发送方如果收到 3 个或 3 个以上重复的 ACK，就认为对应的包丢失，触发快速重传，立即重发该包，而无需等待超时。

#### 其他机制

- SACK（Selective Acknowledgment）：
  - SACK 允许接收方在 ACK 中携带额外信息，告知发送方哪些数据段已经成功接收，哪些数据段丢失。
  - 这样可以帮助发送方更精确地重传丢失的数据，提高效率。
- D-SACK（Duplicate SACK）：
  - D-SACK 可以帮助发送方区分是数据包丢失还是 ACK 丢失。
  - 如果发送方收到重复的 SACK，表明是 ACK 丢失，只需重传 ACK，无需重传数据包。

#### 重传机制的优点

- 保证数据的可靠传输，即使网络发生丢包，也能通过重传机制恢复丢失的数据。
- 提高网络的鲁棒性，使网络能够适应各种复杂的网络环境。

#### 重传机制的缺点

- 增加了网络的负担，重传数据包会占用额外的带宽。
- 可能导致网络拥塞，过多的重传会加剧网络拥塞。

#### 总结

TCP 重传机制是 TCP 协议实现可靠传输的重要保障，通过超时重传和快速重传等机制，可以有效地恢复丢失的数据包，保证数据的可靠传输。同时，也需要注意重传机制可能带来的网络负担和拥塞问题，需要进行合理的控制和优化。
