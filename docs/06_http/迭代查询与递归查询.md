#### 什么是迭代查询和递归查询？

简单来说，这两种查询方式描述的是在进行信息查找时，查询发起方和协助查询方之间的交互方式。

- 递归查询： 查询发起方发出一个请求后，负责处理该请求的服务器必须返回最终结果。如果服务器没有直接答案，它会代替查询方继续向其他服务器查询，直到获得最终答案并返回。就像你委托朋友办事，你只管等结果，中间过程都由朋友负责。
- 迭代查询： 查询发起方发出一个请求后，如果负责处理该请求的服务器没有直接答案，它会返回一个线索，告诉查询方下一步应该去哪里查询。查询方需要根据线索继续查询，直到找到最终答案。就像你自己按图索骥，每到一个地方问路，别人告诉你下一个方向，你需要自己走过去。

#### DNS 查询中的应用

DNS（域名系统）查询是这两种查询方式的典型应用场景。当我们访问一个网站时，需要将域名（www.google.com）转换为 IP 地址，这个转换过程就需要用到 DNS 查询。

- 递归查询（通常发生在客户端与本地域名服务器之间）： 你的电脑（DNS 客户端）向你所在网络设置的本地域名服务器发起 DNS 查询请求，要求解析某个域名。本地域名服务器收到请求后，如果本地缓存没有对应的 IP 地址，它会使用递归查询的方式，代替你的电脑向其他 DNS 服务器（例如根域名服务器、顶级域名服务器等）发起查询，直到获得最终的 IP 地址，然后返回给你的电脑。
- 迭代查询（通常发生在本地域名服务器与其他 DNS 服务器之间）： 本地域名服务器在向上级 DNS 服务器查询时，通常使用迭代查询。例如，www.google.com 的 IP 地址，根域名服务器可能不会直接返回 IP 地址，www.google.com 域的顶级域名服务器的地址。本地域名服务器再向该顶级域名服务器查询，www.google.com 域的权威域名服务器的地址。本地域名服务器最终向权威域名服务器查询，获得最终的 IP 地址。

#### 举例说明

假设你想知道“小明”住在哪里。

- 递归查询： 你问你的朋友：“你知道小明住哪里吗？” 你的朋友如果不知道，他会去问他的朋友，他的朋友再问他的朋友，直到有人知道小明住在哪里，然后把地址一级一级地传回来告诉你。
- 迭代查询： 你问路人：“你知道小明住哪里吗？” 路人说：“你去找 XX 小区的人问问。” 你就去 XX 小区问，小区里的人说：“你去 X 栋楼问问。” 你就去 X 栋楼问，最后找到了小明家。

#### 总结

| 特征     | 递归查询                                     | 迭代查询                               |
| -------- | -------------------------------------------- | -------------------------------------- |
| 查询主体 | 服务器代替客户端查询                         | 客户端自己进行多次查询                 |
| 过程     | 一次请求，服务器返回最终结果                 | 多次请求，服务器只提供线索             |
| 适用场景 | 客户端与本地域名服务器之间                   | 本地域名服务器与其他 DNS 服务器之间    |
| 优点     | 客户端简单，只需等待结果                     | 服务器压力较小                         |
| 缺点     | 服务器压力较大，需要较高的处理能力和带宽资源 | 客户端较为复杂，需要进行多次请求和跳转 |
