#### 1. 短轮询（Short Polling）

- 原理： 客户端定时（如每隔几秒）向服务器发送 HTTP 请求，询问是否有新的消息。
- 优点： 实现简单，服务器端无需特殊处理。
- 缺点： 实时性差，轮询间隔内有消息到达，客户端也无法立即得知；资源浪费，频繁发送请求，即使没有新消息也会产生大量无效请求。

#### 2. 长轮询（Long Polling）

- 原理： 客户端向服务器发送 HTTP 请求，服务器收到请求后不会立即返回响应，而是保持连接，直到有新消息到达或者超时才返回响应。客户端收到响应后，会立即再次发送请求，重复这个过程。
- 优点： 实时性比短轮询好，有新消息时可以立即通知客户端。
- 缺点： 服务器端需要维护大量长连接，资源消耗较大；客户端需要不断发送请求，如果网络不稳定，可能会导致连接中断。

#### 3. SSE（Server-Sent Events）

- 原理： 服务器端主动向客户端推送消息，客户端通过 EventSource API 接收消息。SSE 基于 HTTP 协议，但使用了一种特殊的响应格式，允许服务器持续推送数据。
- 优点： 实现简单，服务器端推送消息方便；实时性较好，服务器有新消息可以立即推送给客户端。
- 缺点： 只能单向通信，即服务器推送消息给客户端，客户端无法主动向服务器发送消息；兼容性相对较差，部分旧版本浏览器不支持。

#### 4. WebSocket

- 原理： 客户端和服务器之间建立持久的双向连接，双方可以随时通过连接发送数据。WebSocket 是一种新的协议，不基于 HTTP，但可以在 HTTP 握手阶段进行协议升级。
- 优点： 实时性最好，可以实现真正的双向通信；性能高，由于建立了持久连接，避免了频繁创建和断开连接的开销。
- 缺点： 实现相对复杂，服务器端需要支持 WebSocket 协议；需要考虑心跳机制，保持连接的稳定性。

#### 总结

| 功能特点 | 短轮询                   | 长轮询               | SSE                  | WebSocket            |
| -------- | ------------------------ | -------------------- | -------------------- | -------------------- |
| 通信方式 | 客户端轮询               | 客户端轮询           | 服务器推送           | 双向通信             |
| 实时性   | 差                       | 较好                 | 较好                 | 最好                 |
| 资源消耗 | 低                       | 较高                 | 较低                 | 较高                 |
| 实现难度 | 简单                     | 较简单               | 简单                 | 较复杂               |
| 适用场景 | 简单应用，实时性要求不高 | 实时性要求较高的应用 | 服务器推送消息的应用 | 实时性要求最高的应用 |
